{% extends "Header.html" %}
{% block content %}


    <script>
    /* function to change tab */
function changetab(evt, Name) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(Name).style.display = "block";
    evt.currentTarget.className += " active";
}
/* opens messages*/
function OpenMessage() {
    var x = document.getElementById("Message1");
    if (x.style.display === "none") {
        x.style.display = "block";
    } else {
        x.style.display = "none";
    }
}
</script>

<head>
<link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='Dashboard.css') }}" />
</head>

<div class="container-fluid">
    {% if post is defined %}
  <h1 align="center"style="padding-top:10px;">{{post.name}}</h1>
    {% endif %}

    {% if title is defined %}
  <h1 align="center" style="padding-top:10px;">{{title}}</h1>
    {% endif %}

    <!-- Side bar -->
<div class="column side">

    <!-- Message and Post buttons -->

    <button class="tablinks" onclick="changetab(event, 'Posts')">Posts</button>
    <button class="tablinks" onclick="changetab(event, 'Messages')">Messages</button>

</select>
    <br><br>

    <!-- Message table -->
  <div id="Messages" class="tabcontent">

  <table>
<td>Message From:</td>
<td> About Post:</td>

                        {% for item in QueryMessage%}

                          {%if item.sentFrom is defined %}
                              {%if item.message is defined %}
                                <!-- gets username who sent message from database  -->
                              <tr> <td><a href = "/Dashboard/Messages/{{ item.id }}"> {{ item.sentFrom }}</a></td>
                                <!-- gets message from database  -->
                                  <td><a href = "/Dashboard/Posts/{{ item.postId }}">{{item.postTitle}}</a></td>
                              </tr>
                                  {% endif %}
                          {% endif %}



                        {% endfor %}
</table>
  </div>

    <!-- Post Table -->
  <div id="Posts" class="tabcontent">
<table>
<td>Post:</td>
<td>Approval Status:</td>

                        {% for item in QueryPosts%}

                          {%if item.name is defined %}
                              {%if item.category is defined %}
                                  {%if item.approval is defined %}
                                      <!-- gets post from database  -->
                                  <tr> <td>  <a href = "/Dashboard/Posts/{{ item.id }}"> {{ item.name }}</a> </td>
                                      <!-- gets approval status from database  -->
                              <td>{{item.approval}}</td></tr>
                                  {% endif %}
                          {% endif %}
                        {% endif %}

                        {% endfor %}
</table>
  </div>
    {% if messages is defined %}
    <script> changetab(event, 'Messages')</script>
    {% else %}
    <script> changetab(event, 'Posts')</script>
    {% endif %}

</div>
  <div class="row">
    <!-- Left Spacer -->

    <div class="col-sm-2"></div>


        {% if post is defined %}
		<div class="container2">

            <label>Approval:</label>   {{post.approval}}<br>

			<!-- Display post's images -->
			<img src="/images/{{post.image}}"  width = 300 height = 300/><br><br><br>

			<!-- Display post's category -->
			<label>Category:</label>   {{post.category}}<br>


			<!-- Display post's price -->
			<label>Price: </label>   $ {{post.price}}<br>


			<!-- Display post's description -->
			<label>Description: </label>   {{post.description}}<br><br><br>
		</div>
            {% elif messages is defined %}
      <div class="container2">
                {% for item in messages %}
                    <p><b>{{item.sentFrom}}:</b> {{item.message}}</p>
                {% endfor %}
          <form action="/sendMessage" method="post">
              <textarea id="subject" name="subject" placeholder="Reply..." style="height:200px; resize: none" required></textarea><br>

                <!-- submit button, will add mandatory field if this field is empty. -->
                    <button type="submit" size="48">Send</button>
		</form>
      </div>
            {% else %}
            <h4>{{eString.string}}
                {% if eString.post is defined %}
                    <a href="/CreatePost" style="color:blue">Click here!</a>
                {% endif %}
                </h4>
        {% endif %}


	<!-- Right Spacer -->
    <div class="col-sm-2"></div>
  </div>

</div>
{% endblock content %}